% ============================================================================
% PREAMBLE - Package Configuration
% ============================================================================

% Encoding and language
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[english]{babel}

% Page layout
\usepackage[margin=2.5cm,top=3cm,bottom=3cm]{geometry}

% Fonts (LuaLaTeX compatible)
\usepackage{lmodern}

% Headers and footers
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\fancyhead[L]{\nouppercase{\leftmark}}
\fancyhead[R]{BCL v1.5.1}
\fancyfoot[C]{\thepage}
\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\footrulewidth}{0.4pt}

% Graphics and colors
\usepackage{xcolor}
\usepackage{graphicx}

% Tables
\usepackage{booktabs}
\usepackage{tabularx}
\usepackage{longtable}
\usepackage{array}

% Lists
\usepackage{enumitem}

% Code listings with custom BCL language
\usepackage{listings}

% Define BCL language for listings
\lstdefinelanguage{BCL}{
  keywords={SET, UNSET, GLOBAL, INCR, APPEND, PUTS, PUTSN, GETS, EXPR, IF, THEN, ELSEIF, ELSE, END, WHILE, DO, FOR, TO, STEP, FOREACH, IN, SWITCH, CASE, DEFAULT, BREAK, CONTINUE, EXIT, PROC, WITH, RETURN, LIST, SPLIT, JOIN, LINDEX, LRANGE, LLENGTH, LAPPEND, LINSERT, LREPLACE, LSORT, LSEARCH, CONCAT, STRING, FORMAT, SCAN, OPEN, CLOSE, READ, TELL, SEEK, EOF, FILE, EXISTS, SIZE, DELETE, RENAME, PWD, GLOB, DIRECTORY, TAILS, NOCOMPLAIN, TYPES, REGEXP, REGSUB, NOCASE, LINE, LINESTOP, LINEANCHOR, EXPANDED, ALL, INDICES, START, MATCH, SUBMATCHES, COUNT, CLOCK, SECONDS, MILLISECONDS, MICROSECONDS, TIMEZONE, LOCALE, GMT, BASE, INFO, COMMANDS, GLOBALS, LOCALS, PROCS, VARS, ARGS, BCLVERSION, EVAL, SOURCE, AFTER, EXEC, ENV, ARGV, AND, OR, NOT},
  sensitive=false,
  comment=[l]{\#},
  morestring=[b]",
  morestring=[b]',
}

\lstset{
  basicstyle=\ttfamily\small,
  keywordstyle=\color{blue}\bfseries,
  commentstyle=\color{green!60!black}\itshape,
  stringstyle=\color{red!80!black},
  numbers=left,
  numberstyle=\tiny\color{gray},
  numbersep=5pt,
  frame=single,
  breaklines=true,
  breakatwhitespace=true,
  tabsize=2,
  showstringspaces=false,
  captionpos=b,
}

% Colored boxes for examples, tips, warnings, notes
\usepackage{tcolorbox}
\tcbuselibrary{skins,breakable}

% Define custom boxes
\newtcolorbox{tipbox}[1][]{
  colback=blue!5!white,
  colframe=blue!75!black,
  fonttitle=\bfseries,
  title=Tip,
  breakable,
  #1
}

\newtcolorbox{warningbox}[1][]{
  colback=orange!5!white,
  colframe=orange!75!black,
  fonttitle=\bfseries,
  title=Warning,
  breakable,
  #1
}

\newtcolorbox{examplebox}[1][]{
  colback=green!5!white,
  colframe=green!75!black,
  fonttitle=\bfseries,
  title=Example,
  breakable,
  #1
}

\newtcolorbox{notebox}[1][]{
  colback=gray!5!white,
  colframe=gray!75!black,
  fonttitle=\bfseries,
  title=Note,
  breakable,
  #1
}

% Hyperlinks and references
\usepackage{hyperref}
\hypersetup{
  colorlinks=true,
  linkcolor=blue,
  filecolor=magenta,
  urlcolor=cyan,
  citecolor=green,
  pdftitle={BCL User Manual},
  pdfauthor={Rafa},
  pdfsubject={BCL Programming Language Manual},
  pdfkeywords={BCL, programming, scripting, Tcl, BASIC},
  bookmarksnumbered=true,
  bookmarksopen=true,
  pdfpagemode=UseOutlines,
}

% Index
\usepackage{makeidx}
\makeindex

% Custom commands
\newcommand{\bcl}{\texttt{BCL}}
\newcommand{\cmd}[1]{\texttt{\textbf{#1}}}
\newcommand{\var}[1]{\texttt{\$#1}}
\newcommand{\file}[1]{\texttt{#1}}
