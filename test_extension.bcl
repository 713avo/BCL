#!/usr/bin/env bcl
# Quick test of LOAD command and SOCKET extension

PUTS "Testing BCL Extension System"
PUTS "=============================="
PUTS ""

PUTS "1. Testing LOAD command..."
LOAD "extensions/socket.so"
PUTS "   ✓ SOCKET extension loaded successfully"
PUTS ""

PUTS "2. Testing INFO COMMANDS to see if SOCKET is registered..."
SET commands [INFO COMMANDS]
SET has_socket [STRING FIRST "SOCKET" $commands]
IF [EXPR $has_socket >= 0] THEN
    PUTS "   ✓ SOCKET command is registered"
ELSE
    PUTS "   ✗ SOCKET command NOT found"
END
PUTS ""

PUTS "3. Testing basic SOCKET functionality..."
PUTS "   Creating server on port 19999..."
SET server [SOCKET SERVER 19999]
PUTS "   ✓ Server created: $server"
PUTS ""

PUTS "4. Closing server..."
SOCKET CLOSE $server
PUTS "   ✓ Server closed"
PUTS ""

PUTS "Extension system test PASSED!"
